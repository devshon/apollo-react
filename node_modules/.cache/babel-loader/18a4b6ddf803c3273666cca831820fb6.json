{"ast":null,"code":"var _jsxFileName = \"/Users/sonseongho/Desktop/workspace/react/react-web/apollo-react/src/routes/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useSubscription } from \"@apollo/react-hooks\";\nimport Movie from \"../components/Movie\";\nimport { BsLayoutThreeColumns, BsGrid3X3, BsPlusSquare } from \"react-icons/bs\";\nimport { Link } from \"react-router-dom\"; // const REFRESH_MOVIES = gql`\n//   subscription {\n//     refreshMovies {\n//       id\n//       title\n//       rating\n//       description_intro\n//       language\n//       medium_cover_image\n//       genres\n//     }\n//   }\n// `;\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_MOVIES = gql`\n  query {\n    movies {\n      id\n      title\n      rating\n      description_intro\n      language\n      medium_cover_image\n      genres\n    }\n  }\n`;\n\nfunction Home() {\n  _s();\n\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(GET_MOVIES); // const test = useSubscription(REFRESH_MOVIES);\n\n  const [refreshing, setRefreshing] = useState(false);\n  const [layout, setLayout] = useState(0);\n  console.log(\"get movies > \", loading, error, data, refetch().then((req, res) => {\n    console.log(\"the >>> \", req, res);\n  }));\n  const onRefresh = useCallback(() => {\n    setRefreshing(!refreshing);\n    refetch();\n  }, [refetch]);\n  useEffect(() => {\n    if (layout === 0) {\n      document.getElementsByTagName(\"body\")[0].style = \"overflow:auto;\";\n    } else {\n      document.getElementsByTagName(\"body\")[0].style = \"overflow:hidden\";\n    }\n  }, [layout]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row-reverse\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/create\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            margin: \"0px 10px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(BsPlusSquare, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          margin: \"0px 10px\"\n        },\n        onClick: () => {\n          layout > 0 ? setLayout(0) : setLayout(1);\n        },\n        children: layout === 0 ? /*#__PURE__*/_jsxDEV(BsLayoutThreeColumns, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(BsGrid3X3, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"200px\",\n        alignItems: \"center\",\n        display: \"flex\",\n        width: \"100%\",\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"rgb(255 0 0)\",\n          fontWeight: \"900\",\n          flex: 1,\n          fontSize: \"44px\",\n          fontFamily: \"system-ui\"\n        },\n        children: \"Son's Movie Collection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: layout === 0 ? {\n        display: \"grid\",\n        gridTemplateColumns: \"1fr 1fr 1fr 1fr 1fr\",\n        justifyItems: \"center\"\n      } : {\n        display: \"flex\",\n        overflow: \"auto\"\n      },\n      children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this), !loading && data && data.movies && data.movies.map(movie => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: layout !== 0 ? {\n            margin: \"0px 10px\"\n          } : {},\n          children: /*#__PURE__*/_jsxDEV(Movie, { ...movie\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this)\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this);\n      }), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Error!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"8TqT8BYb6OxjprVSmDNxo9DcBGI=\", false, function () {\n  return [useQuery];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/sonseongho/Desktop/workspace/react/react-web/apollo-react/src/routes/Home.js"],"names":["React","useState","useEffect","useCallback","gql","useQuery","useSubscription","Movie","BsLayoutThreeColumns","BsGrid3X3","BsPlusSquare","Link","GET_MOVIES","Home","loading","error","data","refetch","refreshing","setRefreshing","layout","setLayout","console","log","then","req","res","onRefresh","document","getElementsByTagName","style","display","flexDirection","margin","height","alignItems","width","textAlign","color","fontWeight","flex","fontSize","fontFamily","gridTemplateColumns","justifyItems","overflow","movies","map","movie","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { gql } from \"apollo-boost\";\nimport { useQuery, useSubscription } from \"@apollo/react-hooks\";\nimport Movie from \"../components/Movie\";\nimport { BsLayoutThreeColumns, BsGrid3X3, BsPlusSquare } from \"react-icons/bs\";\nimport { Link } from \"react-router-dom\";\n\n// const REFRESH_MOVIES = gql`\n//   subscription {\n//     refreshMovies {\n//       id\n//       title\n//       rating\n//       description_intro\n//       language\n//       medium_cover_image\n//       genres\n//     }\n//   }\n// `;\n\nconst GET_MOVIES = gql`\n  query {\n    movies {\n      id\n      title\n      rating\n      description_intro\n      language\n      medium_cover_image\n      genres\n    }\n  }\n`;\n\nfunction Home() {\n  const { loading, error, data, refetch } = useQuery(GET_MOVIES);\n  // const test = useSubscription(REFRESH_MOVIES);\n  const [refreshing, setRefreshing] = useState(false);\n  const [layout, setLayout] = useState(0);\n\n  console.log(\n    \"get movies > \",\n    loading,\n    error,\n    data,\n    refetch().then((req, res) => {\n      console.log(\"the >>> \", req, res);\n    })\n  );\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(!refreshing);\n    refetch();\n  }, [refetch]);\n\n  useEffect(() => {\n    if (layout === 0) {\n      document.getElementsByTagName(\"body\")[0].style = \"overflow:auto;\";\n    } else {\n      document.getElementsByTagName(\"body\")[0].style = \"overflow:hidden\";\n    }\n  }, [layout]);\n\n  return (\n    <div>\n      <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\n        <Link to=\"/create\">\n          <span style={{ margin: \"0px 10px\" }}>\n            <BsPlusSquare size={24} />\n          </span>\n        </Link>\n        <span\n          style={{ margin: \"0px 10px\" }}\n          onClick={() => {\n            layout > 0 ? setLayout(0) : setLayout(1);\n          }}\n        >\n          {layout === 0 ? (\n            <BsLayoutThreeColumns size={24} />\n          ) : (\n            <BsGrid3X3 size={24} />\n          )}\n        </span>\n      </div>\n      <div\n        style={{\n          height: \"200px\",\n          alignItems: \"center\",\n          display: \"flex\",\n          width: \"100%\",\n          textAlign: \"center\",\n        }}\n      >\n        <span\n          style={{\n            color: \"rgb(255 0 0)\",\n            fontWeight: \"900\",\n            flex: 1,\n            fontSize: \"44px\",\n            fontFamily: \"system-ui\",\n          }}\n        >\n          Son's Movie Collection\n        </span>\n      </div>\n      <div\n        style={\n          layout === 0\n            ? {\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr 1fr 1fr 1fr\",\n                justifyItems: \"center\",\n              }\n            : { display: \"flex\", overflow: \"auto\" }\n        }\n      >\n        {loading && <div>Loading...</div>}\n        {!loading &&\n          data &&\n          data.movies &&\n          data.movies.map((movie) => {\n            return (\n              <div\n                key={movie.id}\n                style={layout !== 0 ? { margin: \"0px 10px\" } : {}}\n              >\n                <Movie {...movie} />\n              </div>\n            );\n          })}\n        {error && <div>Error!</div>}\n      </div>\n    </div>\n  );\n}\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}